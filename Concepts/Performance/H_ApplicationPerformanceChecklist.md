# Application Performance Checklist

The following is a brief summary of performance issues that you should check for your application. Some of them are trivial to check and correct (e.g., making your panels be one-shot in IB), others take more work (e.g., scatter loading, optimizing custom drawing routines). For more information about any of these items, look up **bold** words in Librarian, which can be accessed via the Services menu.

---

## Drawing Performance

- [ ] **Best drawing techniques used** (`xyshow`, `userpaths`, `NXRectFillListWithGrays()`, ...).
- [ ] **All windows are sent `useOptimizedDrawing:`** unless this causes incorrect display.
- [ ] **Efficient PostScript generated by App's custom Views** (check using `showps` around `drawSelf::` in **gdb**).
- [ ] **`setwindowtype` operator used** where appropriate to give better interactive drawing feedback.
- [ ] **No redundant drawing**. (Run app with `-NXAllWindowsRetained`. Solve using `-disableDisplay`, `-displayIfNeeded`).

---

## App Memory Usage

- [ ] **All data structures optimized** for size, fragmentation and locality. Look for waste by examining your heap nodes with **MallocDebug**. Consider using **zone allocation** for documents and panels.
- [ ] **Optimized text and data working set** for common operations. App is **scatter loaded** with **link optimization** techniques.
- [ ] **No leaks show up** when using "Leaks" feature of **MallocDebug**.
- [ ] **`setStringValueNoCopy:` used** in place of `setStringValue:` where appropriate.
- [ ] **No leaks of kernel objects** (ports, open files, vm regions).
- [ ] **Copy-on-write memory used** where possible (memory mapped files, out-of-line data in messages, `vm_copy()` for large regions).

---

## Window Server Memory Usage

- [ ] **All windows are deferred** (set in Window attribute inspector in **Interface Builder**).
- [ ] **OneShot windows** for almost all windows (set in Window attribute inspector in **Interface Builder**).
- [ ] **No windows with alpha channel on screen** (check with **Winfo** app).
- [ ] **No unnecessary window depth promotion**. `setpattern` operator used to draw 1/6, 1/2 and 5/6 grays.
- [ ] **No redundant or unused off-screen bitmaps** (run app with `-NXShowAllWindows`).
- [ ] **No unarchived, but unused windows**. (run app with `-NXShowAllWindows`. Create them lazily by moving to separate **Interface Builder** file.)

---

## Interface Builder

- [ ] **One window per IB module**. Info panel removed from main interface module.
- [ ] **No nib sections/files loaded with names**, including the one loaded from `main()` (must use `loadNibSection:owner:withNames:NO`).
- [ ] **All images added to project** instead of in individual IB files. (Images load faster, allows sharing of images between `.nibs`).
- [ ] **No extra sounds, images or scratch objects** in nib files.
- [ ] **Pre-2.0-style set* methods** for setting outlets removed.

---

## Images

- [ ] **NXImage compression used** where applicable.
- [ ] **Don't composite with `NX_COPY`**, use `NX_SOVER` (doesn't allocate alpha channel).

---
*Release 3.3 Copyright Â©1995 NeXT Computer, Inc. All Rights Reserved.*